import{_ as p}from"./plugin-vue_export-helper-c27b6911.js";import{r as e,o,c,a as n,b as s,d as t,f as i}from"./app-cfbf85c1.js";const l={},u=n("h2",{id:"前言",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#前言","aria-hidden":"true"},"#"),s(" 前言")],-1),r=n("li",null,[s("Cypress 不仅支持用户自定义文件结构，还支持用户自定义 Cypress 的"),n("strong",null,"各项配置")],-1),d=n("li",null,"Cypress 可以通过 cypress.json 文件来实现各项配置的自定义**【文件默认是空的】**",-1),k={href:"https://docs.cypress.io/zh-cn/guides/references/configuration.html#Cypress-config",target:"_blank",rel:"noopener noreferrer"},g=i(`<p></p><h2 id="全局配置项" tabindex="-1"><a class="header-anchor" href="#全局配置项" aria-hidden="true">#</a> 全局配置项</h2><figure><img src="https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200601135652017-790382000.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="超时-timeouts相关" tabindex="-1"><a class="header-anchor" href="#超时-timeouts相关" aria-hidden="true">#</a> 超时 Timeouts相关</h2><ul><li>超时是必须要了解的核心概念</li><li>几乎所有命令都可能以某种方式超时</li><li>所有断言，无论它们是默认断言还是自己添加的断言都具有相同的超时时间</li></ul><figure><img src="https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200601135711144-1453643473.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="文件夹-文件相关" tabindex="-1"><a class="header-anchor" href="#文件夹-文件相关" aria-hidden="true">#</a> 文件夹 / 文件相关</h2><p>相对于默认文件结构来说，Cypress 支持用户自定义的文件结构<br><img src="https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200601135732789-1518368160.png" alt="" loading="lazy"></p><h2 id="可视视图" tabindex="-1"><a class="header-anchor" href="#可视视图" aria-hidden="true">#</a> 可视视图</h2><p>Cypress 在 Test runner 中运行时，会显示一个可视视图<br><img src="https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200601135935971-587605906.png" alt="" loading="lazy"></p><h2 id="cypress-config" tabindex="-1"><a class="header-anchor" href="#cypress-config" aria-hidden="true">#</a> Cypress.config()</h2><p>除了直接在 cypress.json 文件里更改配置项之外，Cypress 还允许我们通过 Cypress.config() 去获取或覆盖某些配置项，语法如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 获取所有config信息</span>
Cypress<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 获取指定配置项的信息</span>
Cypress<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>

<span class="token comment">// 更改指定配置项的默认值</span>
Cypress<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span>

<span class="token comment">// 使用对象字面量（object literal）设置多个配置项</span>
Cypress<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><h4 id="小栗子" tabindex="-1"><a class="header-anchor" href="#小栗子" aria-hidden="true">#</a> 小栗子</h4><p>每次测试运行前都打印所有的配置信息，将下列代码添加到 cypress/support/index.js 中</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cy<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">当前环境变量为</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>Cypress<span class="token punctuation">.</span><span class="token function">env</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
    cy<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">当前配置项信息为</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>Cypress<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>运行任意测试文件</strong>，则可以看到执行 visit() 命令前打印了两次log日志<br><img src="https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200601141203815-266603202.png" alt="" loading="lazy"></p><h4 id="在测试文件的栗子" tabindex="-1"><a class="header-anchor" href="#在测试文件的栗子" aria-hidden="true">#</a> 在测试文件的栗子</h4><p>在 Integration 文件夹下创建 testConfig.js 文件</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//&lt;reference types=&quot;cypress&quot; /R&gt;</span>
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#39;测试配置项&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#39;测试取值和设置值&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 获取 pageLoadTimeout默认值</span>
        cy<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">pageLoadTimeout默认值是：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>Cypress<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token string">&#39;pageLoadTimeout&#39;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
        <span class="token comment">// 设置 pageLoadTimeout 值</span>
        Cypress<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token string">&quot;pageLoadTimeout&quot;</span><span class="token punctuation">,</span><span class="token number">100000</span><span class="token punctuation">)</span>
        <span class="token comment">// 再次获取 pageLoadTimeout 的值</span>
        cy<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">pageLoadTimeout默认值是：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>Cypress<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token string">&#39;pageLoadTimeout&#39;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行 testConfig.js 文件，结果如下图<br><img src="https://img2020.cnblogs.com/blog/1896874/202006/1896874-20200601142336402-1007516997.png" alt="" loading="lazy"></p>`,22),m={href:"https://www.cnblogs.com/poloyy/p/13024996.html",target:"_blank",rel:"noopener noreferrer"};function h(v,f){const a=e("ExternalLinkIcon");return o(),c("div",null,[u,n("ul",null,[r,d,n("li",null,[s("这里只介绍常用到的配置项，更多配置项请看："),n("a",k,[s("https://docs.cypress.io/zh-cn/guides/references/configuration.html#Cypress-config"),t(a)])])]),g,n("blockquote",null,[n("p",null,[n("a",m,[s("https://www.cnblogs.com/poloyy/p/13024996.html"),t(a)])])])])}const _=p(l,[["render",h],["__file","Cypress系列（005）--自定义-Cypress.html.vue"]]);export{_ as default};
