import{_ as o}from"./plugin-vue_export-helper-c27b6911.js";import{r as t,o as p,c as r,a as s,b as n,d as e,f as i}from"./app-cfbf85c1.js";const l={},c=s("h2",{id:"常见的环境变量设置方式",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#常见的环境变量设置方式","aria-hidden":"true"},"#"),n(" 常见的环境变量设置方式")],-1),d={href:"https://www.cnblogs.com/poloyy/p/13056393.html",target:"_blank",rel:"noopener noreferrer"},u=i(`<h4 id="前言" tabindex="-1"><a class="header-anchor" href="#前言" aria-hidden="true">#</a> 前言</h4><ul><li>里面写的设置方式针对的是单个环境</li><li>但实际项目可能会存在多个环境（开发、测试、预发、生产），不同环境的环境变量就会不一样</li><li>如果还是单纯只用上面讲到的方式，切换不同环境时，还得手动修改环境变量，极其不方便</li></ul><p></p><h2 id="使用-cypress-env-json" tabindex="-1"><a class="header-anchor" href="#使用-cypress-env-json" aria-hidden="true">#</a> 使用 cypress.env.json</h2><h4 id="前言-1" tabindex="-1"><a class="header-anchor" href="#前言-1" aria-hidden="true">#</a> 前言</h4><ul><li>Cypress 允许针对不同测试环境使用多个配置文件并且在运行时动态指定</li><li>从而免除每切换一次环境，就需要更改环境变量值的情况</li></ul><p></p><h3 id="具体操作步骤" tabindex="-1"><a class="header-anchor" href="#具体操作步骤" aria-hidden="true">#</a> 具体操作步骤</h3><h4 id="创建文件夹和文件" tabindex="-1"><a class="header-anchor" href="#创建文件夹和文件" aria-hidden="true">#</a> 创建文件夹和文件</h4><ul><li>在 cypress安装目录下创建一个 config 文件夹</li><li>文件夹下建立两个文件，分别命名为 cypress.dev.json，cypress.qa.json</li></ul><figure><img src="https://img2020.cnblogs.com/blog/1896874/202010/1896874-20201019122832250-660222662.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="cypress-dev-json-代码" tabindex="-1"><a class="header-anchor" href="#cypress-dev-json-代码" aria-hidden="true">#</a> cypress.dev.json 代码</h4><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:7077/login&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jane.lane&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;password123&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><h4 id="cypress-qa-json-代码" tabindex="-1"><a class="header-anchor" href="#cypress-qa-json-代码" aria-hidden="true">#</a> cypress.qa.json 代码</h4><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:7077/login&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wrongUser&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wrongPwd&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><h4 id="在-cypress-安装目录-plugins-index-js-中更改配置如下" tabindex="-1"><a class="header-anchor" href="#在-cypress-安装目录-plugins-index-js-中更改配置如下" aria-hidden="true">#</a> 在 cypress 安装目录/plugins/index.js 中更改配置如下</h4><figure><img src="https://img2020.cnblogs.com/blog/1896874/202010/1896874-20201019140312384-539288717.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="index-js-的代码" tabindex="-1"><a class="header-anchor" href="#index-js-的代码" aria-hidden="true">#</a> index.js 的代码</h4><figure><img src="https://img2020.cnblogs.com/blog/1896874/202010/1896874-20201019143647112-274468775.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="测试用例代码" tabindex="-1"><a class="header-anchor" href="#测试用例代码" aria-hidden="true">#</a> 测试用例代码</h4><figure><img src="https://img2020.cnblogs.com/blog/1896874/202010/1896874-20201019143650215-1577692824.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="命令行运行-cypress-命令" tabindex="-1"><a class="header-anchor" href="#命令行运行-cypress-命令" aria-hidden="true">#</a> 命令行运行 cypress 命令</h4><p>yarn cypress:open --env configFile=qa</p><ul><li>上述命令打开 cypress 运行器（Test Runner）</li><li>当然 configFile 作为环境变量可以有多种方式传递，参照一开始的文章哦</li></ul><p></p><h4 id="查看运行器的配置项" tabindex="-1"><a class="header-anchor" href="#查看运行器的配置项" aria-hidden="true">#</a> 查看运行器的配置项</h4><figure><img src="https://img2020.cnblogs.com/blog/1896874/202010/1896874-20201019143750678-927465158.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="测试结果" tabindex="-1"><a class="header-anchor" href="#测试结果" aria-hidden="true">#</a> 测试结果</h4><p>点击即可运行测试用例文件<br><img src="https://img2020.cnblogs.com/blog/1896874/202010/1896874-20201019143811680-1843605095.png" alt="" loading="lazy"></p><h2 id="运行时动态指定环境变量" tabindex="-1"><a class="header-anchor" href="#运行时动态指定环境变量" aria-hidden="true">#</a> 运行时动态指定环境变量</h2><ul><li>上面讲的使用 cypress.env.json 可以指定测试环境运行，但需要额外创建文件</li><li>除 cypress.env.json 外，在运行时指定测试环境的同时仍然可以使用 cypress.json 文件</li></ul><p></p><h4 id="cypress-json-代码" tabindex="-1"><a class="header-anchor" href="#cypress-json-代码" aria-hidden="true">#</a> cypress.json 代码</h4><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;targetEnv&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dev&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;iTesting&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;weChat&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:5883&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;qa&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wrongUser&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wrongPassword&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://www.test.com:5883&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><h4 id="support-index-js-代码" tabindex="-1"><a class="header-anchor" href="#support-index-js-代码" aria-hidden="true">#</a> support/index.js 代码</h4><figure><img src="https://img2020.cnblogs.com/blog/1896874/202010/1896874-20201019151823092-1201723260.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="命令行运行-cypress-命令-1" tabindex="-1"><a class="header-anchor" href="#命令行运行-cypress-命令-1" aria-hidden="true">#</a> 命令行运行 cypress 命令</h4><p>指定需要运行的测试环境</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>yarn cypress<span class="token operator">:</span>open --env testEnv=qa
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p></p>`,43),h={href:"https://www.cnblogs.com/poloyy/p/13840462.html",target:"_blank",rel:"noopener noreferrer"};function g(v,b){const a=t("ExternalLinkIcon");return p(),r("div",null,[c,s("p",null,[n("可参考这篇文章："),s("a",d,[n("https://www.cnblogs.com/poloyy/p/13056393.html"),e(a)])]),u,s("blockquote",null,[s("p",null,[s("a",h,[n("https://www.cnblogs.com/poloyy/p/13840462.html"),e(a)])])])])}const q=o(l,[["render",g],["__file","Cypress系列（067）--环境变量设置指南.html.vue"]]);export{q as default};
