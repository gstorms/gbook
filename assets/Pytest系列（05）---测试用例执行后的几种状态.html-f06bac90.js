import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{r as t,o,c as p,a as n,b as a,d as i,f as r}from"./app-3f278ba4.js";const l={},c=r(`<h2 id="用例执行状态" tabindex="-1"><a class="header-anchor" href="#用例执行状态" aria-hidden="true">#</a> 用例执行状态</h2><p>用例执行完成后，每条用例都有自己的状态，常见的状态有</p><ul><li>passed：测试通过</li><li>failed：断言失败</li><li>error：用例本身写的质量不行，本身代码报错（譬如：fixture不存在，fixture里面有报错）</li><li>xfail：预期失败，加了 @pytest.mark.xfail()</li></ul><p></p><h2 id="error的栗子一-参数不存在" tabindex="-1"><a class="header-anchor" href="#error的栗子一-参数不存在" aria-hidden="true">#</a> error的栗子一：参数不存在</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">pwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;获取用户名&quot;</span><span class="token punctuation">)</span>
    a <span class="token operator">=</span> <span class="token string">&quot;yygirl&quot;</span>
    <span class="token keyword">assert</span> a <span class="token operator">==</span> <span class="token string">&quot;yygirl123&quot;</span>
<span class="token keyword">def</span> <span class="token function">test_1</span><span class="token punctuation">(</span>pwd<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">assert</span> user <span class="token operator">==</span> <span class="token string">&quot;yygirl&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="为啥是error" tabindex="-1"><a class="header-anchor" href="#为啥是error" aria-hidden="true">#</a> 为啥是error</h3><p>pwd参数并不存在，所以用例执行error</p><h2 id="error的栗子二-fixture有错" tabindex="-1"><a class="header-anchor" href="#error的栗子二-fixture有错" aria-hidden="true">#</a> error的栗子二：fixture有错</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;获取用户名&quot;</span><span class="token punctuation">)</span>
    a <span class="token operator">=</span> <span class="token string">&quot;yygirl&quot;</span>
    <span class="token keyword">assert</span> a <span class="token operator">==</span> <span class="token string">&quot;yygirl123&quot;</span>
    <span class="token keyword">return</span> a
<span class="token keyword">def</span> <span class="token function">test_1</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">assert</span> user <span class="token operator">==</span> <span class="token string">&quot;yygirl&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="为啥是error-1" tabindex="-1"><a class="header-anchor" href="#为啥是error-1" aria-hidden="true">#</a> 为啥是error？</h3><ul><li>fixture里面断言失败，所以fixture会报错；</li><li>因为test_1调用了错误的fixture，所以error表示用例有问题</li></ul><p></p><h2 id="failed的栗子一" tabindex="-1"><a class="header-anchor" href="#failed的栗子一" aria-hidden="true">#</a> failed的栗子一</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">pwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;获取密码&quot;</span><span class="token punctuation">)</span>
    a <span class="token operator">=</span> <span class="token string">&quot;yygirl&quot;</span>
    <span class="token keyword">return</span> a
<span class="token keyword">def</span> <span class="token function">test_2</span><span class="token punctuation">(</span>pwd<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">assert</span> pwd <span class="token operator">==</span> <span class="token string">&quot;yygirl123&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="为啥是failed" tabindex="-1"><a class="header-anchor" href="#为啥是failed" aria-hidden="true">#</a> 为啥是failed</h3><p>因为fixture返回的变量断言失败</p><h2 id="failed的栗子二" tabindex="-1"><a class="header-anchor" href="#failed的栗子二" aria-hidden="true">#</a> failed的栗子二</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">pwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;获取密码&quot;</span><span class="token punctuation">)</span>
    a <span class="token operator">=</span> <span class="token string">&quot;polo&quot;</span>
    <span class="token keyword">return</span> a
<span class="token keyword">def</span> <span class="token function">test_2</span><span class="token punctuation">(</span>pwd<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">raise</span> NameError
    <span class="token keyword">assert</span> pwd <span class="token operator">==</span> <span class="token string">&quot;polo&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="为啥是failed-1" tabindex="-1"><a class="header-anchor" href="#为啥是failed-1" aria-hidden="true">#</a> 为啥是failed</h3><p>因为用例执行期间抛出了异常</p><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><ul><li>测试用例的代码有异常，包括主动抛出异常或代码有异常，都算failed</li><li>当测试用例调用的fixture有异常，或传入的参数有异常的时候，都算error</li><li>如果一份测试报告中，error的测试用例数量越多，说明测试用例质量越差</li></ul><p></p><h2 id="xfail的栗子" tabindex="-1"><a class="header-anchor" href="#xfail的栗子" aria-hidden="true">#</a> xfail的栗子</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 断言装饰器</span>
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>xfail</span><span class="token punctuation">(</span>raises<span class="token operator">=</span>ZeroDivisionError<span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="为啥是xfail" tabindex="-1"><a class="header-anchor" href="#为啥是xfail" aria-hidden="true">#</a> 为啥是xfail</h3><p>代码有异常，且和raised的异常类匹配，所以是xfail**（算测试通过的一种，表示符合期望捕捉到的异常）**，并不算failed<br> 如果和raised的异常类不匹配，则是failed</p>`,28),d={href:"https://www.cnblogs.com/poloyy/p/12653187.html",target:"_blank",rel:"noopener noreferrer"};function u(k,h){const s=t("ExternalLinkIcon");return o(),p("div",null,[c,n("blockquote",null,[n("p",null,[a("转载："),n("a",d,[a("https://www.cnblogs.com/poloyy/p/12653187.html"),i(s)])])])])}const m=e(l,[["render",u],["__file","Pytest系列（05）---测试用例执行后的几种状态.html.vue"]]);export{m as default};
