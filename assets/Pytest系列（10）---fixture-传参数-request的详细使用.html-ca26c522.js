import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as p,o as e,c as o,a as n,b as s,d as i,f as u}from"./app-cfbf85c1.js";const c={},l=u(`<h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言" aria-hidden="true">#</a> 前言</h2><ul><li>为了提高复用性，我们在写测试用例的时候，会用到不同的fixture，比如：最常见的登录操作，大部分的用例的前置条件都是登录</li><li>假设不同的用例想登录不同的测试账号，那么登录fixture就不能把账号写死，需要通过传参的方式来完成登录操作</li></ul><p></p><h2 id="案例一-传单个参数" tabindex="-1"><a class="header-anchor" href="#案例一-传单个参数" aria-hidden="true">#</a> 案例一：传单个参数</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> pytest
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">login</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> request<span class="token punctuation">.</span>param
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;== 账号是：</span><span class="token interpolation"><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span><span class="token string"> ==&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> name
data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;pyy1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;polo&quot;</span><span class="token punctuation">]</span>
ids <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-interpolation"><span class="token string">f&quot;login_test_name is:</span><span class="token interpolation"><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span> <span class="token keyword">for</span> name <span class="token keyword">in</span> data<span class="token punctuation">]</span>
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>parametrize</span><span class="token punctuation">(</span><span class="token string">&quot;login&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> ids<span class="token operator">=</span>ids<span class="token punctuation">,</span> indirect<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_name</span><span class="token punctuation">(</span>login<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot; 测试用例的登录账号是：</span><span class="token interpolation"><span class="token punctuation">{</span>login<span class="token punctuation">}</span></span><span class="token string"> &quot;</span></span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="执行结果" tabindex="-1"><a class="header-anchor" href="#执行结果" aria-hidden="true">#</a> 执行结果</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>collecting <span class="token punctuation">..</span>. collected <span class="token number">2</span> items
10fixture_request.py::test_name<span class="token punctuation">[</span>login_test_name is:pyy1<span class="token punctuation">]</span> <span class="token operator">==</span> 账号是：pyy1 <span class="token operator">==</span>
PASSED          <span class="token punctuation">[</span> <span class="token number">50</span>%<span class="token punctuation">]</span> 测试用例的登录账号是：pyy1 
10fixture_request.py::test_name<span class="token punctuation">[</span>login_test_name is:polo<span class="token punctuation">]</span> <span class="token operator">==</span> 账号是：polo <span class="token operator">==</span>
PASSED          <span class="token punctuation">[</span><span class="token number">100</span>%<span class="token punctuation">]</span> 测试用例的登录账号是：polo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="知识点" tabindex="-1"><a class="header-anchor" href="#知识点" aria-hidden="true">#</a> 知识点</h3><ul><li>添加  indirect=True  参数是为了把 login 当成一个函数去执行，而不是一个参数，并且将data当做参数传入函数</li><li>def test_name(login) ，这里的login是获取fixture返回的值</li></ul><p></p><h2 id="案例二-多个参数" tabindex="-1"><a class="header-anchor" href="#案例二-多个参数" aria-hidden="true">#</a> 案例二：多个参数</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">logins</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    param <span class="token operator">=</span> request<span class="token punctuation">.</span>param
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;账号是：</span><span class="token interpolation"><span class="token punctuation">{</span>param<span class="token punctuation">[</span><span class="token string">&#39;username&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">，密码是：</span><span class="token interpolation"><span class="token punctuation">{</span>param<span class="token punctuation">[</span><span class="token string">&#39;pwd&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> param
data <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;name1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pwd&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;pwd1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;name2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pwd&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;pwd2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>parametrize</span><span class="token punctuation">(</span><span class="token string">&quot;logins&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> indirect<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_name_pwd</span><span class="token punctuation">(</span>logins<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;账号是：</span><span class="token interpolation"><span class="token punctuation">{</span>logins<span class="token punctuation">[</span><span class="token string">&#39;username&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">，密码是：</span><span class="token interpolation"><span class="token punctuation">{</span>logins<span class="token punctuation">[</span><span class="token string">&#39;pwd&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="执行结果-1" tabindex="-1"><a class="header-anchor" href="#执行结果-1" aria-hidden="true">#</a> 执行结果</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>10fixture_request.py::test_name_pwd<span class="token punctuation">[</span>logins0<span class="token punctuation">]</span> 账号是：name1，密码是：pwd1
PASSED                      <span class="token punctuation">[</span> <span class="token number">50</span>%<span class="token punctuation">]</span>账号是：name1，密码是：pwd1
10fixture_request.py::test_name_pwd<span class="token punctuation">[</span>logins1<span class="token punctuation">]</span> 账号是：name2，密码是：pwd2
PASSED                      <span class="token punctuation">[</span><span class="token number">100</span>%<span class="token punctuation">]</span>账号是：name2，密码是：pwd2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="知识点-1" tabindex="-1"><a class="header-anchor" href="#知识点-1" aria-hidden="true">#</a> 知识点</h3><p>如果需要传多个参数，需要通过字典去传</p><h2 id="案例三-多个fixture-只加一个装饰器" tabindex="-1"><a class="header-anchor" href="#案例三-多个fixture-只加一个装饰器" aria-hidden="true">#</a> 案例三：多个fixture（只加一个装饰器）</h2><p><strong>这种更常用</strong></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 多个fixture</span>
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span><span class="token punctuation">(</span>scope<span class="token operator">=</span><span class="token string">&quot;module&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">input_user</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    user <span class="token operator">=</span> request<span class="token punctuation">.</span>param
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;登录账户：%s&quot;</span> <span class="token operator">%</span> user<span class="token punctuation">)</span>
    <span class="token keyword">return</span> user
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span><span class="token punctuation">(</span>scope<span class="token operator">=</span><span class="token string">&quot;module&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">input_psw</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    psw <span class="token operator">=</span> request<span class="token punctuation">.</span>param
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;登录密码：%s&quot;</span> <span class="token operator">%</span> psw<span class="token punctuation">)</span>
    <span class="token keyword">return</span> psw
data <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">(</span><span class="token string">&quot;name1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pwd1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">&quot;name2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pwd2&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>parametrize</span><span class="token punctuation">(</span><span class="token string">&quot;input_user,input_psw&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> indirect<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_more_fixture</span><span class="token punctuation">(</span>input_user<span class="token punctuation">,</span> input_psw<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;fixture返回的内容:&quot;</span><span class="token punctuation">,</span> input_user<span class="token punctuation">,</span> input_psw<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="执行结果-2" tabindex="-1"><a class="header-anchor" href="#执行结果-2" aria-hidden="true">#</a> 执行结果</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>10fixture_request.py::test_more_fixture<span class="token punctuation">[</span>name1-pwd1<span class="token punctuation">]</span> 登录账户：name1
登录密码：pwd1
PASSED               <span class="token punctuation">[</span> <span class="token number">50</span>%<span class="token punctuation">]</span>fixture返回的内容: name1 pwd1
10fixture_request.py::test_more_fixture<span class="token punctuation">[</span>name2-pwd2<span class="token punctuation">]</span> 登录账户：name2
登录密码：pwd2
PASSED               <span class="token punctuation">[</span><span class="token number">100</span>%<span class="token punctuation">]</span>fixture返回的内容: name2 pwd2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><h2 id="案例四-多个fixture-叠加装饰器" tabindex="-1"><a class="header-anchor" href="#案例四-多个fixture-叠加装饰器" aria-hidden="true">#</a> 案例四：多个fixture（叠加装饰器）</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># 多个fixture</span>
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span><span class="token punctuation">(</span>scope<span class="token operator">=</span><span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">input_user</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    user <span class="token operator">=</span> request<span class="token punctuation">.</span>param
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;登录账户：%s&quot;</span> <span class="token operator">%</span> user<span class="token punctuation">)</span>
    <span class="token keyword">return</span> user
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span><span class="token punctuation">(</span>scope<span class="token operator">=</span><span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">input_psw</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    psw <span class="token operator">=</span> request<span class="token punctuation">.</span>param
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;登录密码：%s&quot;</span> <span class="token operator">%</span> psw<span class="token punctuation">)</span>
    <span class="token keyword">return</span> psw
name <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;name1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name2&quot;</span><span class="token punctuation">]</span>
pwd <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;pwd1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pwd2&quot;</span><span class="token punctuation">]</span>
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>parametrize</span><span class="token punctuation">(</span><span class="token string">&quot;input_user&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> indirect<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>parametrize</span><span class="token punctuation">(</span><span class="token string">&quot;input_psw&quot;</span><span class="token punctuation">,</span> pwd<span class="token punctuation">,</span> indirect<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_more_fixture</span><span class="token punctuation">(</span>input_user<span class="token punctuation">,</span> input_psw<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;fixture返回的内容:&quot;</span><span class="token punctuation">,</span> input_user<span class="token punctuation">,</span> input_psw<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="执行结果-3" tabindex="-1"><a class="header-anchor" href="#执行结果-3" aria-hidden="true">#</a> 执行结果</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>10fixture_request.py::test_more_fixture<span class="token punctuation">[</span>pwd1-name1<span class="token punctuation">]</span> 登录账户：name1
登录密码：pwd1
PASSED               <span class="token punctuation">[</span> <span class="token number">25</span>%<span class="token punctuation">]</span>fixture返回的内容: name1 pwd1
10fixture_request.py::test_more_fixture<span class="token punctuation">[</span>pwd1-name2<span class="token punctuation">]</span> 登录账户：name2
登录密码：pwd1
PASSED               <span class="token punctuation">[</span> <span class="token number">50</span>%<span class="token punctuation">]</span>fixture返回的内容: name2 pwd1
10fixture_request.py::test_more_fixture<span class="token punctuation">[</span>pwd2-name1<span class="token punctuation">]</span> 登录账户：name1
登录密码：pwd2
PASSED               <span class="token punctuation">[</span> <span class="token number">75</span>%<span class="token punctuation">]</span>fixture返回的内容: name1 pwd2
10fixture_request.py::test_more_fixture<span class="token punctuation">[</span>pwd2-name2<span class="token punctuation">]</span> 登录账户：name2
登录密码：pwd2
PASSED               <span class="token punctuation">[</span><span class="token number">100</span>%<span class="token punctuation">]</span>fixture返回的内容: name2 pwd2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试用例数=2*2=4条</p>`,27),r={href:"https://www.cnblogs.com/poloyy/p/12685948.html",target:"_blank",rel:"noopener noreferrer"};function d(k,m){const a=p("ExternalLinkIcon");return e(),o("div",null,[l,n("blockquote",null,[n("p",null,[s("转载："),n("a",r,[s("https://www.cnblogs.com/poloyy/p/12685948.html"),i(a)])])])])}const g=t(c,[["render",d],["__file","Pytest系列（10）---fixture-传参数-request的详细使用.html.vue"]]);export{g as default};
