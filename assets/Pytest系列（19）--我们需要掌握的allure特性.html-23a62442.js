import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as e,o as p,c as o,a as n,b as a,d as l,f as c}from"./app-731a6e06.js";const i={},u=c(`<h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言" aria-hidden="true">#</a> 前言</h2><p>前面我们介绍了allure的快速入门，只是单纯的敲allure命令而已<br> 其实allure还有内置的特性可以让我们在pytest代码里面用起来，然后我们生成的报告更加直观、详细、贴合管理层的心意...</p><h2 id="environment" tabindex="-1"><a class="header-anchor" href="#environment" aria-hidden="true">#</a> Environment</h2><p>可以理解成<strong>环境变量参数</strong>，没有什么实际作用，个人觉得只是为了让别人知道本次测试的运行环境参数而已，显示啥都是自己定的<br><strong>注意！！默认是没有的哦</strong><br><img src="https://img2020.cnblogs.com/blog/1896874/202004/1896874-20200416190714772-747732691.png" alt="" loading="lazy"></p><h2 id="如何添加environment呢" tabindex="-1"><a class="header-anchor" href="#如何添加environment呢" aria-hidden="true">#</a> 如何添加Environment呢</h2><p>通过创建environment.properties或者environment.xml文件，并把文件存放到allure-results(这个目录是生成最后的html报告之前，生成依赖文件的目录)目录下，就是 --alluredir  后面跟的目录<br> 像我这里目录就是allure，所以放在allure下面 --alluredir allure<br><img src="https://img2020.cnblogs.com/blog/1896874/202004/1896874-20200416192513518-762408880.png" alt="" loading="lazy"></p><h3 id="environment-properties" tabindex="-1"><a class="header-anchor" href="#environment-properties" aria-hidden="true">#</a> environment.properties</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Browser=Chrome
Browser.Version=81.0.4044.92
Stand=Production
ApiUrl=127.0.0.1/login
python.Version=3.7.2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>或者</strong></p><h3 id="environment-xml" tabindex="-1"><a class="header-anchor" href="#environment-xml" aria-hidden="true">#</a> environment.xml</h3><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parameter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span>Browser<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Chrome<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parameter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parameter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span>Browser.Version<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>81.0.4044.92<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parameter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parameter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span>Stand<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>Production<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parameter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parameter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span>ApiUrl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>127.0.0.1/login<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parameter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parameter</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span>python.Version<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>3.7.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parameter</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意！都不可以写中文哦！！！！亲测！！会乱码</strong></p><h3 id="运行之后-我们看看allure报告的environment" tabindex="-1"><a class="header-anchor" href="#运行之后-我们看看allure报告的environment" aria-hidden="true">#</a> <strong>运行之后，我们看看allure报告的environment</strong></h3><figure><img src="https://img2020.cnblogs.com/blog/1896874/202004/1896874-20200416192739245-1776053197.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="categories" tabindex="-1"><a class="header-anchor" href="#categories" aria-hidden="true">#</a> Categories</h2><p>**直译：**分类<br> **通俗理解：**测试用例结果的分类<br> 默认情况下，有两类缺陷：</p><ol><li>Product defects 产品缺陷（测试结果：failed）</li><li>Test defects 测试缺陷（测试结果：error/broken）</li></ol><p>我们是可以创建自定义缺陷分类的，将 categories.json 文件添加到allure-results目录即可（和上面environment.properties放同一个目录）</p><h3 id="categories-json" tabindex="-1"><a class="header-anchor" href="#categories-json" aria-hidden="true">#</a> categories.json</h3><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Ignored tests&quot;</span><span class="token punctuation">,</span> 
    <span class="token property">&quot;matchedStatuses&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;skipped&quot;</span><span class="token punctuation">]</span> 
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Infrastructure problems&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;matchedStatuses&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;broken&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;failed&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;messageRegex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.*bye-bye.*&quot;</span> 
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Outdated tests&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;matchedStatuses&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;broken&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;traceRegex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.*FileNotFoundException.*&quot;</span> 
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Product defects&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;matchedStatuses&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;failed&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Test defects&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;matchedStatuses&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;broken&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><h3 id="讲下参数的含义" tabindex="-1"><a class="header-anchor" href="#讲下参数的含义" aria-hidden="true">#</a> 讲下参数的含义</h3><ul><li><strong>name</strong>：分类名称</li><li><strong>matchedStatuses</strong>：测试用例的运行状态，默认[&quot;failed&quot;, &quot;broken&quot;, &quot;passed&quot;, &quot;skipped&quot;, &quot;unknown&quot;]</li><li><strong>messageRegex</strong>：测试用例运行的错误信息，默认是 .* ，是通过正则去匹配的哦！</li><li><strong>traceRegex</strong>：测试用例运行的错误堆栈信息，默认是  .*  ，也是通过正则去匹配的哦！</li></ul><h3 id="注意" tabindex="-1"><a class="header-anchor" href="#注意" aria-hidden="true">#</a> 注意</h3><p>这里的name是可以写中文的哦！</p><h2 id="flaky-test" tabindex="-1"><a class="header-anchor" href="#flaky-test" aria-hidden="true">#</a> Flaky test</h2><p>**用法：**在类或者方法上直接加 @Flaky<br> **官方也说了：**可以将整个测试类标记为Flaky</p><h3 id="那什么是flaky呢" tabindex="-1"><a class="header-anchor" href="#那什么是flaky呢" aria-hidden="true">#</a> 那什么是Flaky呢？</h3><ul><li>简单来说就是，不够稳定的测试用例集，有可能前阵子还运行成功，过阵子就运行失败，理解成“闪烁”</li><li>标记成Flaky的好处就是：当用例失败的情况下，我们能获取足够详细的信息，毕竟有可能某些测试用例是非常重要的</li><li>如果不标记为Flaky的话，可能就要禁用这些测试</li></ul>`,29),r={href:"https://www.cnblogs.com/poloyy/p/12715212.html",target:"_blank",rel:"noopener noreferrer"};function d(k,g){const s=e("ExternalLinkIcon");return p(),o("div",null,[u,n("blockquote",null,[n("p",null,[a("转载："),n("a",r,[a("https://www.cnblogs.com/poloyy/p/12715212.html"),l(s)])])])])}const h=t(i,[["render",d],["__file","Pytest系列（19）--我们需要掌握的allure特性.html.vue"]]);export{h as default};
