import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as e,o as p,c as o,a as n,b as a,d as i,f as c}from"./app-d0fb0332.js";const l={},u=c(`<h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言" aria-hidden="true">#</a> 前言</h2><ul><li>@allure.title 和 @allure.description 都是装饰器，给测试用例提供标题和描述</li><li>其实 allure 还提供了在测试用例执行过程中动态指定标题和描述等标签的方法</li><li>如： allure.dynamic.description allure.dynamic.title</li></ul><p></p><h2 id="allure-dynamic-的源代码" tabindex="-1"><a class="header-anchor" href="#allure-dynamic-的源代码" aria-hidden="true">#</a> allure.dynamic 的源代码</h2><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Dynamic</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">title</span><span class="token punctuation">(</span>test_title<span class="token punctuation">)</span><span class="token punctuation">:</span>
        plugin_manager<span class="token punctuation">.</span>hook<span class="token punctuation">.</span>add_title<span class="token punctuation">(</span>test_title<span class="token operator">=</span>test_title<span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">description</span><span class="token punctuation">(</span>test_description<span class="token punctuation">)</span><span class="token punctuation">:</span>
        plugin_manager<span class="token punctuation">.</span>hook<span class="token punctuation">.</span>add_description<span class="token punctuation">(</span>test_description<span class="token operator">=</span>test_description<span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">description_html</span><span class="token punctuation">(</span>test_description_html<span class="token punctuation">)</span><span class="token punctuation">:</span>
        plugin_manager<span class="token punctuation">.</span>hook<span class="token punctuation">.</span>add_description_html<span class="token punctuation">(</span>test_description_html<span class="token operator">=</span>test_description_html<span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">label</span><span class="token punctuation">(</span>label_type<span class="token punctuation">,</span> <span class="token operator">*</span>labels<span class="token punctuation">)</span><span class="token punctuation">:</span>
        plugin_manager<span class="token punctuation">.</span>hook<span class="token punctuation">.</span>add_label<span class="token punctuation">(</span>label_type<span class="token operator">=</span>label_type<span class="token punctuation">,</span> labels<span class="token operator">=</span>labels<span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">severity</span><span class="token punctuation">(</span>severity_level<span class="token punctuation">)</span><span class="token punctuation">:</span>
        Dynamic<span class="token punctuation">.</span>label<span class="token punctuation">(</span>LabelType<span class="token punctuation">.</span>SEVERITY<span class="token punctuation">,</span> severity_level<span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">feature</span><span class="token punctuation">(</span><span class="token operator">*</span>features<span class="token punctuation">)</span><span class="token punctuation">:</span>
        Dynamic<span class="token punctuation">.</span>label<span class="token punctuation">(</span>LabelType<span class="token punctuation">.</span>FEATURE<span class="token punctuation">,</span> <span class="token operator">*</span>features<span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">story</span><span class="token punctuation">(</span><span class="token operator">*</span>stories<span class="token punctuation">)</span><span class="token punctuation">:</span>
        Dynamic<span class="token punctuation">.</span>label<span class="token punctuation">(</span>LabelType<span class="token punctuation">.</span>STORY<span class="token punctuation">,</span> <span class="token operator">*</span>stories<span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">tag</span><span class="token punctuation">(</span><span class="token operator">*</span>tags<span class="token punctuation">)</span><span class="token punctuation">:</span>
        Dynamic<span class="token punctuation">.</span>label<span class="token punctuation">(</span>LabelType<span class="token punctuation">.</span>TAG<span class="token punctuation">,</span> <span class="token operator">*</span>tags<span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">link</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> link_type<span class="token operator">=</span>LinkType<span class="token punctuation">.</span>LINK<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        plugin_manager<span class="token punctuation">.</span>hook<span class="token punctuation">.</span>add_link<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> link_type<span class="token operator">=</span>link_type<span class="token punctuation">,</span> name<span class="token operator">=</span>name<span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">issue</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        Dynamic<span class="token punctuation">.</span>link<span class="token punctuation">(</span>url<span class="token punctuation">,</span> link_type<span class="token operator">=</span>LinkType<span class="token punctuation">.</span>ISSUE<span class="token punctuation">,</span> name<span class="token operator">=</span>name<span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">testcase</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        Dynamic<span class="token punctuation">.</span>link<span class="token punctuation">(</span>url<span class="token punctuation">,</span> link_type<span class="token operator">=</span>LinkType<span class="token punctuation">.</span>TEST_CASE<span class="token punctuation">,</span> name<span class="token operator">=</span>name<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><h4 id="重点" tabindex="-1"><a class="header-anchor" href="#重点" aria-hidden="true">#</a> 重点</h4><p>上面有的方法都能进行动态修改，如：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>feature
allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>link
allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>issue
allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>testcase
allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>story
allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>title
allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>description
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><h2 id="title-的栗子" tabindex="-1"><a class="header-anchor" href="#title-的栗子" aria-hidden="true">#</a> title 的栗子</h2><h4 id="测试代码" tabindex="-1"><a class="header-anchor" href="#测试代码" aria-hidden="true">#</a> 测试代码</h4><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token decorator annotation punctuation">@allure<span class="token punctuation">.</span>title</span><span class="token punctuation">(</span><span class="token string">&quot;装饰器标题&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
    allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&quot;动态标题&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><h4 id="allure-报告" tabindex="-1"><a class="header-anchor" href="#allure-报告" aria-hidden="true">#</a> allure 报告</h4><figure><img src="https://img2020.cnblogs.com/blog/1896874/202010/1896874-20201029124423518-305611670.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="description-的栗子" tabindex="-1"><a class="header-anchor" href="#description-的栗子" aria-hidden="true">#</a> description 的栗子</h2><h4 id="测试代码-1" tabindex="-1"><a class="header-anchor" href="#测试代码-1" aria-hidden="true">#</a> 测试代码</h4><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">test_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    动态设置描述
    &quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
    allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>description<span class="token punctuation">(</span><span class="token string">&quot;动态描述&quot;</span><span class="token punctuation">)</span>
    allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&quot;动态标题&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><h4 id="allure-报告-1" tabindex="-1"><a class="header-anchor" href="#allure-报告-1" aria-hidden="true">#</a> allure 报告</h4><p><img src="https://img2020.cnblogs.com/blog/1896874/202010/1896874-20201028220350336-1102469402.png" alt="" loading="lazy"><br> 可以看到<strong>动态描述</strong>会覆盖<strong>动态设置描述</strong></p><h2 id="结合-parametrize" tabindex="-1"><a class="header-anchor" href="#结合-parametrize" aria-hidden="true">#</a> 结合 parametrize</h2><h4 id="测试代码-2" tabindex="-1"><a class="header-anchor" href="#测试代码-2" aria-hidden="true">#</a> 测试代码</h4><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>data <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">(</span><span class="token string">&quot;name1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name1 登录成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">&quot;name2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name2 登录失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">&quot;name3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name3 登录成功&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>parametrize</span><span class="token punctuation">(</span><span class="token string">&#39;username,pwd,title&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_2</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> pwd<span class="token punctuation">,</span> title<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    登录测试用例1
    &quot;&quot;&quot;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> pwd<span class="token punctuation">)</span>
    allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>title<span class="token punctuation">(</span>title<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><h4 id="allure-报告-2" tabindex="-1"><a class="header-anchor" href="#allure-报告-2" aria-hidden="true">#</a> allure 报告</h4><figure><img src="https://img2020.cnblogs.com/blog/1896874/202010/1896874-20201029124815524-464475328.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="其他属性的栗子" tabindex="-1"><a class="header-anchor" href="#其他属性的栗子" aria-hidden="true">#</a> 其他属性的栗子</h2><h4 id="测试代码-3" tabindex="-1"><a class="header-anchor" href="#测试代码-3" aria-hidden="true">#</a> 测试代码</h4><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">test_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>feature<span class="token punctuation">(</span><span class="token string">&#39;动态feature&#39;</span><span class="token punctuation">)</span>
    allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>story<span class="token punctuation">(</span><span class="token string">&#39;动态story&#39;</span><span class="token punctuation">)</span>
    allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>link<span class="token punctuation">(</span><span class="token string">&quot;https://www.cnblogs.com/poloyy/p/1.html&quot;</span><span class="token punctuation">,</span> <span class="token string">&#39;动态Link&#39;</span><span class="token punctuation">)</span>
    allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>issue<span class="token punctuation">(</span><span class="token string">&quot;https://www.cnblogs.com/poloyy/p/2.html&quot;</span><span class="token punctuation">,</span> <span class="token string">&#39;动态Issue&#39;</span><span class="token punctuation">)</span>
    allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>testcase<span class="token punctuation">(</span><span class="token string">&quot;https://www.cnblogs.com/poloyy/p/3.html&quot;</span><span class="token punctuation">,</span> <span class="token string">&#39;动态testcase&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p></p><h4 id="allure-报告-3" tabindex="-1"><a class="header-anchor" href="#allure-报告-3" aria-hidden="true">#</a> allure 报告</h4><figure><img src="https://img2020.cnblogs.com/blog/1896874/202010/1896874-20201029130901391-441197616.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>`,34),r={href:"https://www.cnblogs.com/poloyy/p/13894043.html",target:"_blank",rel:"noopener noreferrer"};function d(k,m){const s=e("ExternalLinkIcon");return p(),o("div",null,[u,n("blockquote",null,[n("p",null,[a("转载："),n("a",r,[a("https://www.cnblogs.com/poloyy/p/13894043.html"),i(s)])])])])}const h=t(l,[["render",d],["__file","Pytest系列（29）--详解-allure.dynamic-动态生成功能.html.vue"]]);export{h as default};
