import{_ as p}from"./plugin-vue_export-helper-c27b6911.js";import{r as i,o as c,c as l,a as s,b as n,d as e,w as t,f as o}from"./app-207e7d61.js";const r={},u=o('<p>This guide should help you to make sure you are following our best practices and writing tests that are more resilient.</p><h2 id="testing-philosophy" tabindex="-1"><a class="header-anchor" href="#testing-philosophy" aria-hidden="true">#</a> Testing philosophy</h2><h3 id="test-user-visible-behavior" tabindex="-1"><a class="header-anchor" href="#test-user-visible-behavior" aria-hidden="true">#</a> Test user-visible behavior</h3><p>Automated tests should verify that the application code works for the end users, and avoid relying on implementation details such as things which users will not typically use, see, or even know about such as the name of a function, whether something is an array, or the CSS class of some element. The end user will see or interact with what is rendered on the page, so your test should typically only see/interact with the same rendered output.</p><h3 id="make-tests-as-isolated-as-possible" tabindex="-1"><a class="header-anchor" href="#make-tests-as-isolated-as-possible" aria-hidden="true">#</a> Make tests as isolated as possible</h3>',5),d=o(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> test <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@playwright/test&#39;</span><span class="token punctuation">;</span>

test<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> page <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Runs before each test and signs in each page.</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">goto</span><span class="token punctuation">(</span><span class="token string">&#39;https://github.com/login&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByLabel</span><span class="token punctuation">(</span><span class="token string">&#39;Username or email address&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token string">&#39;username&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByLabel</span><span class="token punctuation">(</span><span class="token string">&#39;Password&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token string">&#39;password&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Sign in&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;first&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> page <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// page is signed in.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;second&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> page <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// page is signed in.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),h=s("h3",{id:"write-fewer-tests-but-longer-tests",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#write-fewer-tests-but-longer-tests","aria-hidden":"true"},"#"),n(" Write fewer tests but longer tests")],-1),k=s("p",null,"When it comes to end to end testing having long tests is not a bad thing. It's ok to have multiple actions and assertions in your test so you can test complete App flows. You should avoid separating your assertions into individual test blocks as it doesn't really bring much value and just slows down the running of your tests.",-1),g=o(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// Make a few checks that will not stop the test when failed...</span>
<span class="token keyword">await</span> expect<span class="token punctuation">.</span><span class="token function">soft</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getByTestId</span><span class="token punctuation">(</span><span class="token string">&#39;status&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveText</span><span class="token punctuation">(</span><span class="token string">&#39;Success&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ... and continue the test to check more things.</span>
<span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&#39;link&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;next page&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="avoid-testing-third-party-dependencies" tabindex="-1"><a class="header-anchor" href="#avoid-testing-third-party-dependencies" aria-hidden="true">#</a> Avoid testing third-party dependencies</h3><p>Only test what you control. Don&#39;t try to test links to external sites or third party servers that you do not control. Not only is it time consuming and can slow down your tests but also you can not control the content of the page you are linking to, or if there are cookie banners or overlay pages or anything else that might cause your test to fail.</p><h3 id="testing-with-a-database" tabindex="-1"><a class="header-anchor" href="#testing-with-a-database" aria-hidden="true">#</a> Testing with a database</h3><p>If working with a database then make sure you control the data. Test against a staging environment and make sure it doesn&#39;t change. For visual regression tests make sure the operating system and browser versions are the same.</p><h2 id="best-practices" tabindex="-1"><a class="header-anchor" href="#best-practices" aria-hidden="true">#</a> Best Practices</h2><h3 id="use-locators" tabindex="-1"><a class="header-anchor" href="#use-locators" aria-hidden="true">#</a> Use locators</h3>`,7),v=o(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>üëç page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;submit&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="use-chaining-and-filtering" tabindex="-1"><a class="header-anchor" href="#use-chaining-and-filtering" aria-hidden="true">#</a> Use chaining and filtering</h4>`,2),m=o(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> product <span class="token operator">=</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&#39;listitem&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">hasText</span><span class="token operator">:</span> <span class="token string">&#39;Product 2&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,1),b=o(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">await</span> page
    <span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&#39;listitem&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">hasText</span><span class="token operator">:</span> <span class="token string">&#39;Product 2&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Add to cart&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="prefer-user-facing-attributes-to-xpath-or-css-selectors" tabindex="-1"><a class="header-anchor" href="#prefer-user-facing-attributes-to-xpath-or-css-selectors" aria-hidden="true">#</a> Prefer user-facing attributes to XPath or CSS selectors</h4><p>Your DOM can easily change so having your tests depend on your DOM structure can lead to failing tests. For example consider selecting this button by its CSS classes. Should the designer change something then the class might change breaking your test.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>üëé page<span class="token punctuation">.</span><span class="token function">locator</span><span class="token punctuation">(</span><span class="token string">&#39;button.buttonIcon.episode-actions-later&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Use locators that are resilient to changes in the DOM.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>üëç page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;submit&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="generate-locators" tabindex="-1"><a class="header-anchor" href="#generate-locators" aria-hidden="true">#</a> Generate locators</h3>`,7),y=o(`<h4 id="use-codegen-to-generate-locators" tabindex="-1"><a class="header-anchor" href="#use-codegen-to-generate-locators" aria-hidden="true">#</a> Use <code>codegen</code> to generate locators</h4><p>To pick a locator run the <code>codegen</code> command followed by the URL that you would like to pick a locator from.</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>npx playwright codegen playwright.dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>This will open a new browser window as well as the Playwright inspector. To pick a locator first click on the &#39;Record&#39; button to stop the recording. By default when you run the <code>codegen</code> command it will start a new recording. Once you stop the recording the &#39;Pick Locator&#39; button will be available to click.</p><p>You can then hover over any element on your page in the browser window and see the locator highlighted below your cursor. Clicking on an element will add the locator into the Playwright inspector. You can either copy the locator and paste into your test file or continue to explore the locator by editing it in the Playwright Inspector, for example by modifying the text, and seeing the results in the browser window.</p><img width="1394" alt="generating locators with codegen" loading="lazy" src="https://user-images.githubusercontent.com/13063165/212103268-e7d8ee8b-d307-4cba-be13-831f3fbb1f40.png"><h4 id="use-the-vs-code-extension-to-generate-locators" tabindex="-1"><a class="header-anchor" href="#use-the-vs-code-extension-to-generate-locators" aria-hidden="true">#</a> Use the VS Code extension to generate locators</h4>`,7),w=s("img",{width:"1394",alt:"generating locators in vs code with codegen",loading:"lazy",src:"https://user-images.githubusercontent.com/13063165/212269873-aca04043-16ce-4627-906f-7351d09740ab.png"},null,-1),f=s("h3",{id:"use-web-first-assertions",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#use-web-first-assertions","aria-hidden":"true"},"#"),n(" Use web first assertions")],-1),x=s("code",null,"toBeVisible()",-1),_=o(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>üëç <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">&#39;welcome&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

üëé <span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">&#39;welcome&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="don-t-use-manual-assertions" tabindex="-1"><a class="header-anchor" href="#don-t-use-manual-assertions" aria-hidden="true">#</a> Don&#39;t use manual assertions</h4><p>Don&#39;t use manual assertions that are not awaiting the expect. In the code below the await is inside the expect rather than before it. When using assertions such as <code>isVisible()</code> the test wont wait a single second, it will just check the locator is there and return immediately.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>üëé <span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">&#39;welcome&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Use web first assertions such as <code>toBeVisible()</code> instead.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>üëç <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">&#39;welcome&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="configure-debugging" tabindex="-1"><a class="header-anchor" href="#configure-debugging" aria-hidden="true">#</a> Configure debugging</h3><h4 id="local-debugging" tabindex="-1"><a class="header-anchor" href="#local-debugging" aria-hidden="true">#</a> Local debugging</h4>`,8),j=o(`<img width="1338" alt="debugging tests in vscode" loading="lazy" src="https://user-images.githubusercontent.com/13063165/212274675-5c6e1647-2aab-40fd-9804-8680c1ac2d16.png"><p>You can live debug your test by clicking or editing the locators in your test in VS Code which will highlight this locator in the browser window as well as show you any other matching locators found on the page.</p><img width="1394" alt="live debugging locators in vscode" loading="lazy" src="https://user-images.githubusercontent.com/13063165/212273189-da271dc4-0f59-4138-92a8-10e719066cbe.png"><p>You can also debug your tests with the Playwright inspector by running your tests with the <code>--debug</code> flag.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>npx playwright test <span class="token operator">--</span>debug
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>You can then step through your test, view actionability logs and edit the locator live and see it highlighted in the browser window. This will show you which locators match, how many of them there are.</p><img width="1350" alt="debugging with the playwright inspector" loading="lazy" src="https://user-images.githubusercontent.com/13063165/212276296-4f5b18e7-2bd7-4766-9aa5-783517bd4aa2.png"><p>To debug a specific test add the name of the test file and the line number of the test followed by the <code>--debug</code> flag.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>npx playwright test example<span class="token punctuation">.</span>spec<span class="token punctuation">.</span>ts<span class="token operator">:</span><span class="token number">9</span> <span class="token operator">--</span>debug
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="debugging-on-ci" tabindex="-1"><a class="header-anchor" href="#debugging-on-ci" aria-hidden="true">#</a> Debugging on CI</h4>`,10),T=o(`<img width="1516" alt="playwrights trace viewer" loading="lazy" src="https://user-images.githubusercontent.com/13063165/212277895-c63d94c2-bd06-4881-864e-62790a072ca3.png"><p>Traces are configured in the Playwright config file and are set to run on CI on the first retry of a failed test. We don&#39;t recommend setting this to <code>on</code> so that traces are run on every test as it&#39;s very performance heavy. However you can run a trace locally when developing with the <code>--trace</code> flag.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>npx playwright test <span class="token operator">--</span>trace on
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Once you run this command your traces will be recorded for each test and can be viewed directly from the HTML report.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>npx playwright show<span class="token operator">-</span>report
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img width="1516" alt="Playwrights HTML report" loading="lazy" src="https://user-images.githubusercontent.com/13063165/212279022-d929d4c0-2271-486a-a75f-166ac231d25f.png"><p>Traces can be opened by clicking on the icon next to the test or by opening each of the test reports and scrolling down to the traces section.</p><img width="1516" alt="Screenshot 2023-01-13 at 09 58 34" loading="lazy" src="https://user-images.githubusercontent.com/13063165/212279699-c9eb134f-4f4e-4f19-805c-37596d3272a6.png"><h3 id="use-playwright-s-tooling" tabindex="-1"><a class="header-anchor" href="#use-playwright-s-tooling" aria-hidden="true">#</a> Use Playwright&#39;s Tooling</h3><p>Playwright comes with a range of tooling to help you write tests.</p>`,10),P=s("li",null,[s("a",{href:"./test-typescript"},"Typescript"),n(" in Playwright works out of the box and gives you better IDE integrations. Your IDE will show you everything you can do and highlight when you do something wrong. No TypeScript experience is needed and it is not necessary for your code to be in TypeScript, all you need to do is create your tests with a "),s("code",null,".ts"),n(" extension.")],-1),C=o(`<h3 id="test-across-all-browsers" tabindex="-1"><a class="header-anchor" href="#test-across-all-browsers" aria-hidden="true">#</a> Test across all browsers</h3><p>Playwright makes it easy to test your site across all <a href="./test-configuration#multiple-browsers">browsers</a> no matter what platform you are on. Testing across all browsers ensures your app works for all users. In your config file you can set up projects adding the name and which browser or device to use.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// playwright.config.js</span>
<span class="token comment">// @ts-check</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> devices <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@playwright/test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@playwright/test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>PlaywrightTestConfig<span class="token punctuation">}</span></span> */</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">projects</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;chromium&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>devices<span class="token punctuation">[</span><span class="token string">&#39;Desktop Chrome&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;firefox&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>devices<span class="token punctuation">[</span><span class="token string">&#39;Desktop Firefox&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;webkit&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>devices<span class="token punctuation">[</span><span class="token string">&#39;Desktop Safari&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// playwright.config.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> type PlaywrightTestConfig<span class="token punctuation">,</span> devices <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@playwright/test&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token literal-property property">config</span><span class="token operator">:</span> PlaywrightTestConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">projects</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;chromium&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>devices<span class="token punctuation">[</span><span class="token string">&#39;Desktop Chrome&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;firefox&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>devices<span class="token punctuation">[</span><span class="token string">&#39;Desktop Firefox&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;webkit&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>devices<span class="token punctuation">[</span><span class="token string">&#39;Desktop Safari&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> config<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="keep-your-playwright-dependency-up-to-date" tabindex="-1"><a class="header-anchor" href="#keep-your-playwright-dependency-up-to-date" aria-hidden="true">#</a> Keep your Playwright dependency up to date</h3><p>By keeping your Playwright version up to date you will be able to test your app on the latest browser versions and catch failures before the latest browser version is released to the public.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>npm install <span class="token operator">-</span><span class="token constant">D</span> @playwright<span class="token operator">/</span>test@latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,7),B=o(`<p>You can see what version of Playwright you have by running the following command.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>npx playwright <span class="token operator">--</span>version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="run-tests-on-ci" tabindex="-1"><a class="header-anchor" href="#run-tests-on-ci" aria-hidden="true">#</a> Run tests on CI</h3>`,3),I=s("p",null,"Use Linux when running your tests on CI as it is cheaper. Developers can use whatever environment when running locally but use linux on CI.",-1),S=s("h4",{id:"use-parallelism-and-sharding",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#use-parallelism-and-sharding","aria-hidden":"true"},"#"),n(" Use parallelism and sharding")],-1),D=o(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> test <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@playwright/test&#39;</span><span class="token punctuation">;</span>

test<span class="token punctuation">.</span>describe<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;parallel&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;runs in parallel 1&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> page <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#39;runs in parallel 2&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> page <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),V=o(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>npx playwright test <span class="token operator">--</span>shard<span class="token operator">=</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,1);function L(R,Y){const a=i("RouterLink");return c(),l("div",null,[u,s("p",null,[n("Each test should be completely isolated from another test and should run independently with its own local storage, session storage, data, cookies etc. "),e(a,{to:"/book/playwright/browser-contexts.html"},{default:t(()=>[n("Test isolation")]),_:1}),n(" improves reproducibility, makes debugging easier and prevents cascading test failures.")]),s("p",null,[n("In order to avoid repetition for a particular part of your test you can use "),e(a,{to:"/book/playwright/test-api/class-test.html"},{default:t(()=>[n("before and after hooks")]),_:1}),n(". Within your test file add a before hook to run a part of your test before each test such as going to a particular URL or logging in to a part of your app. This keeps your tests isolated as no test relies on another. However it is also ok to have a little duplication when tests are simple enough especially if it keeps your tests clearer and easier to read and maintain.")]),d,s("p",null,[n("You can also reuse the signed-in state in the tests with "),e(a,{to:"/book/playwright/auth.html#reuse-signed-in-state"},{default:t(()=>[n("global setup")]),_:1}),n(". That way you can log in only once and then skip the log in step for all of the tests.")]),h,k,s("p",null,[n("If your test does fail, Playwright will give you an error message showing what part of the test failed which you can see either in VS Code, the terminal, the HTML report, or the trace viewer. You can also use "),e(a,{to:"/book/playwright/test-assertions.html#soft-assertions"},{default:t(()=>[n("soft assertions")]),_:1}),n(" which do not terminate test execution but mark the test as failed.")]),g,s("p",null,[n("In order to write end to end tests we need to first find elements on the webpage. We can do this by using Playwright's built in "),e(a,{to:"/book/playwright/locators.html"},{default:t(()=>[n("locators")]),_:1}),n(". Locators come with auto waiting and retry-ability. Auto waiting means that Playwright performs a range of actionability checks on the elements, such as ensuring the element is visible and enabled before it performs the click. To make tests resilient, we recommend prioritizing user-facing attributes and explicit contracts.")]),v,s("p",null,[n("Locators can be "),e(a,{to:"/book/playwright/locators.html#chaining-locators"},{default:t(()=>[n("chained")]),_:1}),n(" to narrow down the search to a particular part of the page.")]),m,s("p",null,[n("You can also "),e(a,{to:"/book/playwright/locators.html#filtering-locators"},{default:t(()=>[n("filter locators")]),_:1}),n(" by text or by another locator.")]),b,s("p",null,[n("Playwright has a "),e(a,{to:"/book/playwright/codegen.html"},{default:t(()=>[n("test generator")]),_:1}),n(" that can generate tests and pick locators for you. It will look at your page and figure out the best locator, prioritizing role, text and test id locators. If the generator finds multiple elements matching the locator, it will improve the locator to make it resilient and uniquely identify the target element, so you don't have to worry about failing tests due to locators.")]),y,s("p",null,[n("You can also use the "),e(a,{to:"/book/playwright/getting-started-vscode.html"},{default:t(()=>[n("VS Code Extension")]),_:1}),n(" to generate locators as well as record a test. The VS Code extension also gives you a great developer experience when writing, running, and debugging tests.")]),w,f,s("p",null,[n("Assertions are a way to verify that the expected result and the actual result matched or not. By using "),e(a,{to:"/book/playwright/test-assertions.html"},{default:t(()=>[n("web first assertions")]),_:1}),n(" Playwright will wait until the expected condition is met. For example, when testing an alert message, a test would click a button that makes a message appear and check that the alert message is there. If the alert message takes half a second to appear, assertions such as "),x,n(" will wait and retry if needed.")]),_,s("p",null,[n("For local debugging we recommend you "),e(a,{to:"/book/playwright/getting-started-vscode.html#live-debugging"},{default:t(()=>[n("debug your tests live in VSCode.")]),_:1}),n(" by installing the "),e(a,{to:"/book/playwright/getting-started-vscode.html"},{default:t(()=>[n("VS Code extension")]),_:1}),n(". You can run tests in debug mode by right clicking on the line next to the test you want to run which will open a browser window and pause at where the breakpoint is set.")]),j,s("p",null,[n("For CI failures, use the Playwright "),e(a,{to:"/book/playwright/trace-viewer.html"},{default:t(()=>[n("trace viewer")]),_:1}),n(" instead of videos and screenshots. The trace viewer gives you a full trace of your tests as a local Progressive Web App (PWA) that can easily be shared. With the trace viewer you can view the timeline, inspect DOM snapshots for each action using dev tools, view network requests and more.")]),T,s("ul",null,[s("li",null,[n("The "),e(a,{to:"/book/playwright/getting-started-vscode.html"},{default:t(()=>[n("VS Code extension")]),_:1}),n(" gives you a great developer experience when writing, running, and debugging tests.")]),s("li",null,[n("The "),e(a,{to:"/book/playwright/codegen.html"},{default:t(()=>[n("test generator")]),_:1}),n(" can generate tests and pick locators for you.")]),s("li",null,[n("The "),e(a,{to:"/book/playwright/trace-viewer.html"},{default:t(()=>[n("trace viewer")]),_:1}),n(" gives you a full trace of your tests as a local PWA that can easily be shared. With the trace viewer you can view the timeline, inspect DOM snapshots for each action, view network requests and more.")]),P]),C,s("p",null,[n("Check the "),e(a,{to:"/book/playwright/release-notes-js.html"},{default:t(()=>[n("release notes")]),_:1}),n(" to see what the latest version is and what changes have been released.")]),B,s("p",null,[n("Setup CI/CD and run your tests frequently. The more often you run your tests the better. Ideally you should run your tests on each commit and pull request. Playwright comes with a "),e(a,{to:"/book/playwright/ci-intro-js.html"},{default:t(()=>[n("GitHub actions workflow")]),_:1}),n(" so that tests will run on CI for you with no setup required. Playwright can also be setup on the "),e(a,{to:"/book/playwright/ci.html"},{default:t(()=>[n("CI environment")]),_:1}),n(" of your choice.")]),I,S,s("p",null,[n("Playwright runs tests in "),e(a,{to:"/book/playwright/test-parallel.html"},{default:t(()=>[n("parallel")]),_:1}),n(" by default. Tests in a single file are run in order, in the same worker process. If you have many independent tests in a single file, you might want to run them in parallel")]),D,s("p",null,[n("Playwright can "),e(a,{to:"/book/playwright/test-parallel.html#shard-tests-between-multiple-machines"},{default:t(()=>[n("shard")]),_:1}),n(" a test suite, so that it can be executed on multiple machines.")]),V])}const z=p(r,[["render",L],["__file","best-practices-js.html.vue"]]);export{z as default};
