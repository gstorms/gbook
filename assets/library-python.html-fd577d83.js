import{_ as c}from"./plugin-vue_export-helper-c27b6911.js";import{r as i,o as l,c as r,a as n,d as a,b as s,w as p,f as e}from"./app-207e7d61.js";const u={},d=n("h2",{id:"installation",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#installation","aria-hidden":"true"},"#"),s(" Installation")],-1),k=n("h3",{id:"pip",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#pip","aria-hidden":"true"},"#"),s(" Pip")],-1),h={href:"https://pypi.python.org/pypi/playwright/",target:"_blank",rel:"noopener noreferrer"},g=n("img",{src:"https://badge.fury.io/py/playwright.svg",alt:"PyPI version",tabindex:"0",loading:"lazy"},null,-1),m=n("figcaption",null,"PyPI version",-1),v=e(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>pip <span class="token function">install</span> <span class="token parameter variable">--upgrade</span> pip
pip <span class="token function">install</span> playwright
playwright <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="conda" tabindex="-1"><a class="header-anchor" href="#conda" aria-hidden="true">#</a> Conda</h3>`,2),y={href:"https://anaconda.org/Microsoft/playwright",target:"_blank",rel:"noopener noreferrer"},b=n("img",{src:"https://img.shields.io/conda/v/microsoft/playwright",alt:"Anaconda version",tabindex:"0",loading:"lazy"},null,-1),w=n("figcaption",null,"Anaconda version",-1),_=e(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conda config <span class="token parameter variable">--add</span> channels conda-forge
conda config <span class="token parameter variable">--add</span> channels microsoft
conda <span class="token function">install</span> playwright
playwright <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),f=e(`<h2 id="usage" tabindex="-1"><a class="header-anchor" href="#usage" aria-hidden="true">#</a> Usage</h2><p>Once installed, you can <code>import</code> Playwright in a Python script, and launch any of the 3 browsers (<code>chromium</code>, <code>firefox</code> and <code>webkit</code>).</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> playwright<span class="token punctuation">.</span>sync_api <span class="token keyword">import</span> sync_playwright

<span class="token keyword">with</span> sync_playwright<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> p<span class="token punctuation">:</span>
    browser <span class="token operator">=</span> p<span class="token punctuation">.</span>chromium<span class="token punctuation">.</span>launch<span class="token punctuation">(</span><span class="token punctuation">)</span>
    page <span class="token operator">=</span> browser<span class="token punctuation">.</span>new_page<span class="token punctuation">(</span><span class="token punctuation">)</span>
    page<span class="token punctuation">.</span>goto<span class="token punctuation">(</span><span class="token string">&quot;http://playwright.dev&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    browser<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),x={href:"https://docs.python.org/3/library/asyncio.html",target:"_blank",rel:"noopener noreferrer"},P=e(`<div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> asyncio
<span class="token keyword">from</span> playwright<span class="token punctuation">.</span>async_api <span class="token keyword">import</span> async_playwright

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">async</span> <span class="token keyword">with</span> async_playwright<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> p<span class="token punctuation">:</span>
        browser <span class="token operator">=</span> <span class="token keyword">await</span> p<span class="token punctuation">.</span>chromium<span class="token punctuation">.</span>launch<span class="token punctuation">(</span><span class="token punctuation">)</span>
        page <span class="token operator">=</span> <span class="token keyword">await</span> browser<span class="token punctuation">.</span>new_page<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">await</span> page<span class="token punctuation">.</span>goto<span class="token punctuation">(</span><span class="token string">&quot;http://playwright.dev&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token keyword">await</span> page<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">await</span> browser<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="first-script" tabindex="-1"><a class="header-anchor" href="#first-script" aria-hidden="true">#</a> First script</h2><p>In our first script, we will navigate to <code>whatsmyuseragent.org</code> and take a screenshot in WebKit.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> playwright<span class="token punctuation">.</span>sync_api <span class="token keyword">import</span> sync_playwright

<span class="token keyword">with</span> sync_playwright<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> p<span class="token punctuation">:</span>
    browser <span class="token operator">=</span> p<span class="token punctuation">.</span>webkit<span class="token punctuation">.</span>launch<span class="token punctuation">(</span><span class="token punctuation">)</span>
    page <span class="token operator">=</span> browser<span class="token punctuation">.</span>new_page<span class="token punctuation">(</span><span class="token punctuation">)</span>
    page<span class="token punctuation">.</span>goto<span class="token punctuation">(</span><span class="token string">&quot;http://whatsmyuseragent.org/&quot;</span><span class="token punctuation">)</span>
    page<span class="token punctuation">.</span>screenshot<span class="token punctuation">(</span>path<span class="token operator">=</span><span class="token string">&quot;example.png&quot;</span><span class="token punctuation">)</span>
    browser<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),q=n("code",null,"headless=False",-1),I=n("code",null,"option: slowMo",-1),L=e(`<div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>firefox<span class="token punctuation">.</span>launch<span class="token punctuation">(</span>headless<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> slow_mo<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="interactive-mode-repl" tabindex="-1"><a class="header-anchor" href="#interactive-mode-repl" aria-hidden="true">#</a> Interactive mode (REPL)</h2><p>You can launch the interactive python REPL:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>python
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>and then launch Playwright within it for quick experimentation:</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> playwright<span class="token punctuation">.</span>sync_api <span class="token keyword">import</span> sync_playwright
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> playwright <span class="token operator">=</span> sync_playwright<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># Use playwright.chromium, playwright.firefox or playwright.webkit</span>
<span class="token comment"># Pass headless=False to launch() to see the browser UI</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> browser <span class="token operator">=</span> playwright<span class="token punctuation">.</span>chromium<span class="token punctuation">.</span>launch<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> page <span class="token operator">=</span> browser<span class="token punctuation">.</span>new_page<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> page<span class="token punctuation">.</span>goto<span class="token punctuation">(</span><span class="token string">&quot;http://whatsmyuseragent.org/&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> page<span class="token punctuation">.</span>screenshot<span class="token punctuation">(</span>path<span class="token operator">=</span><span class="token string">&quot;example.png&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> browser<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> playwright<span class="token punctuation">.</span>stop<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Async REPL such as <code>asyncio</code> REPL:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>python <span class="token parameter variable">-m</span> asyncio
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> playwright<span class="token punctuation">.</span>async_api <span class="token keyword">import</span> async_playwright
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> playwright <span class="token operator">=</span> <span class="token keyword">await</span> async_playwright<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> browser <span class="token operator">=</span> <span class="token keyword">await</span> playwright<span class="token punctuation">.</span>chromium<span class="token punctuation">.</span>launch<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> page <span class="token operator">=</span> <span class="token keyword">await</span> browser<span class="token punctuation">.</span>new_page<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span>goto<span class="token punctuation">(</span><span class="token string">&quot;http://whatsmyuseragent.org/&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span>screenshot<span class="token punctuation">(</span>path<span class="token operator">=</span><span class="token string">&quot;example.png&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">await</span> browser<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">await</span> playwright<span class="token punctuation">.</span>stop<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="pyinstaller" tabindex="-1"><a class="header-anchor" href="#pyinstaller" aria-hidden="true">#</a> Pyinstaller</h2>`,10),R={href:"https://www.pyinstaller.org/",target:"_blank",rel:"noopener noreferrer"},E=e(`<div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># main.py</span>
<span class="token keyword">from</span> playwright<span class="token punctuation">.</span>sync_api <span class="token keyword">import</span> sync_playwright

<span class="token keyword">with</span> sync_playwright<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> p<span class="token punctuation">:</span>
    browser <span class="token operator">=</span> p<span class="token punctuation">.</span>chromium<span class="token punctuation">.</span>launch<span class="token punctuation">(</span><span class="token punctuation">)</span>
    page <span class="token operator">=</span> browser<span class="token punctuation">.</span>new_page<span class="token punctuation">(</span><span class="token punctuation">)</span>
    page<span class="token punctuation">.</span>goto<span class="token punctuation">(</span><span class="token string">&quot;http://whatsmyuseragent.org/&quot;</span><span class="token punctuation">)</span>
    page<span class="token punctuation">.</span>screenshot<span class="token punctuation">(</span>path<span class="token operator">=</span><span class="token string">&quot;example.png&quot;</span><span class="token punctuation">)</span>
    browser<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you want to bundle browsers with the executables:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">PLAYWRIGHT_BROWSERS_PATH</span><span class="token operator">=</span><span class="token number">0</span> playwright <span class="token function">install</span> chromium
pyinstaller <span class="token parameter variable">-F</span> main.py
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-batch line-numbers-mode" data-ext="batch"><pre class="language-batch"><code><span class="token command"><span class="token keyword">set</span> <span class="token variable">PLAYWRIGHT_BROWSERS_PATH</span><span class="token operator">=</span><span class="token number">0</span></span>
<span class="token command"><span class="token keyword">playwright</span> install chromium</span>
<span class="token command"><span class="token keyword">pyinstaller</span> <span class="token parameter attr-name">-F</span> main.py</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code><span class="token variable">$env</span>:PLAYWRIGHT_BROWSERS_PATH=<span class="token string">&quot;0&quot;</span>
playwright install chromium
pyinstaller <span class="token operator">-</span>F main<span class="token punctuation">.</span>py
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container note"><p class="hint-container-title">注</p><p>Bundling the browsers with the executables will generate bigger binaries.<br> It is recommended to only bundle the browsers you use.</p></div><h2 id="known-issues" tabindex="-1"><a class="header-anchor" href="#known-issues" aria-hidden="true">#</a> Known issues</h2><h3 id="time-sleep-leads-to-outdated-state" tabindex="-1"><a class="header-anchor" href="#time-sleep-leads-to-outdated-state" aria-hidden="true">#</a> <code>time.sleep()</code> leads to outdated state</h3>`,8),A=n("code",null,"page.wait_for_timeout(5000)",-1),T=n("code",null,"time.sleep(5)",-1),W=n("code",null,"wait_for_timeout",-1),S=n("code",null,"time",-1),B=n("code",null,"time.sleep(5)",-1),F=e('<h3 id="incompatible-with-selectoreventloop-of-asyncio-on-windows" tabindex="-1"><a class="header-anchor" href="#incompatible-with-selectoreventloop-of-asyncio-on-windows" aria-hidden="true">#</a> incompatible with <code>SelectorEventLoop</code> of <code>asyncio</code> on Windows</h3><p>Playwright runs the driver in a subprocess, so it requires <code>ProactorEventLoop</code> of <code>asyncio</code> on Windows because <code>SelectorEventLoop</code> does not supports async subprocesses.</p><p>On Windows Python 3.7, Playwright sets the default event loop to <code>ProactorEventLoop</code> as it is default on Python 3.8+.</p><h3 id="threading" tabindex="-1"><a class="header-anchor" href="#threading" aria-hidden="true">#</a> Threading</h3>',4),H={href:"https://github.com/microsoft/playwright-python/issues/623",target:"_blank",rel:"noopener noreferrer"};function Y(O,C){const t=i("ExternalLinkIcon"),o=i("RouterLink");return l(),r("div",null,[d,k,n("figure",null,[n("a",h,[g,a(t)]),m]),v,n("figure",null,[n("a",y,[b,a(t)]),w]),_,n("p",null,[s("These commands download the Playwright package and install browser binaries for Chromium, Firefox and WebKit. To modify this behavior see "),a(o,{to:"/book/playwright/browsers.html#installing-browsers"},{default:p(()=>[s("installation parameters")]),_:1}),s(".")]),f,n("p",null,[s("Playwright supports two variations of the API: synchronous and asynchronous. If your modern project uses "),n("a",x,[s("asyncio"),a(t)]),s(", you should use async API:")]),P,n("p",null,[s("By default, Playwright runs the browsers in headless mode. To see the browser UI, pass the "),q,s(" flag while launching the browser. You can also use ["),I,s("] to slow down execution. Learn more in the debugging tools "),a(o,{to:"/book/playwright/debug.html"},{default:p(()=>[s("section")]),_:1}),s(".")]),L,n("p",null,[s("You can use Playwright with "),n("a",R,[s("Pyinstaller"),a(t)]),s(" to create standalone executables.")]),E,n("p",null,[s("Most likely you don't need to wait manually, since Playwright has "),a(o,{to:"/book/playwright/actionability.html"},{default:p(()=>[s("auto-waiting")]),_:1}),s(". If you still rely on it, you should use "),A,s(" instead of "),T,s(" and it is better to not wait for a timeout at all, but sometimes it is useful for debugging. In these cases, use our wait ("),W,s(") method instead of the "),S,s(" module. This is because we internally rely on asynchronous operations and when using "),B,s(" they can't get processed correctly.")]),F,n("p",null,[s("Playwright's API is not thread-safe. If you are using Playwright in a multi-threaded environment, you should create a playwright instance per thread. See "),n("a",H,[s("threading issue"),a(t)]),s(" for more details.")])])}const V=c(u,[["render",Y],["__file","library-python.html.vue"]]);export{V as default};
