import{_ as o}from"./plugin-vue_export-helper-c27b6911.js";import{r as i,o as p,c,a as n,b as s,d as t,f as e}from"./app-d0fb0332.js";const l="/image/1.gif",r="/image/2.png",u="/image/3.gif",d="/image/4.png",k="/image/5.png",m="/image/6.png",v={},h=n("h1",{id:"从0到1开发一款自己的vscode插件",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#从0到1开发一款自己的vscode插件","aria-hidden":"true"},"#"),s(" 从0到1开发一款自己的vscode插件")],-1),b={href:"https://segmentfault.com/a/1190000040720760",target:"_blank",rel:"noopener noreferrer"},g=e('<h2 id="一、vscode插件是什么" tabindex="-1"><a class="header-anchor" href="#一、vscode插件是什么" aria-hidden="true">#</a> 一、vscode插件是什么？</h2><p>大家对vscode肯定都不陌生，其是微软推出的一款轻量级代码编辑器，在使用的时候总会时不时的安装一些插件去协助我们进行开发，这些插件就是利用vscode给我们开放的一些API的基础上进行扩展功能的开发，从而解决开发中的一些问题，提高生产效率。这种插件化思想一方面使该代码编辑器更轻量化；另一方面能够充分利用社区的力量，为其提供更加多元化的插件。（下图是我做的一个小插件的效果图）<br><img src="'+l+`" alt="aaa.gif" loading="lazy"></p><h2 id="二、vscode插件能做什么" tabindex="-1"><a class="header-anchor" href="#二、vscode插件能做什么" aria-hidden="true">#</a> 二、vscode插件能做什么？</h2><blockquote><p>vscode插件能做什么？其核心点在于vscode为其提供了哪些开放能力，只有其开放的能力才能为我们所用，就官网来看，利用vscode插件能够做以下事情（该部分来自于vscode官网扩展能力概述部分）：</p></blockquote><h3 id="_1-通用功能" tabindex="-1"><a class="header-anchor" href="#_1-通用功能" aria-hidden="true">#</a> 1. 通用功能</h3><p>可以在任何扩展中使用的核心功能，主要包括以下几点：<br> （1）能够添加命令、配置项、快捷键、菜单项、右键菜单；<br> （2）存储工作区或全局数据；<br> （3）展示通知信息；<br> （4）使用快速选择收集用户的输入；<br> （5）打开文件选择器让用户去选择文件或文件夹；<br> （6）使用Progress API去阐述长时间运行的操作；</p><h3 id="_2-主题化" tabindex="-1"><a class="header-anchor" href="#_2-主题化" aria-hidden="true">#</a> 2. 主题化</h3><p>控制vscode的外观，包括编辑器中源代码的颜色和vscode ui的颜色，其主要包含三种类型的主题：<br> （1）颜色主题：其允许将颜色应用于VS Code UI组件和编辑器中的文本；<br> （2）文件图标主题：文件图标显示在VS Code UI中的位置，例如文件资源管理器、快速打开列表和编辑器选项卡；<br> （3）产品图标主题：在整个UI中使用的一组图标</p><h3 id="_3-声明性语言特性" tabindex="-1"><a class="header-anchor" href="#_3-声明性语言特性" aria-hidden="true">#</a> 3. 声明性语言特性</h3><p>声明性语言功能为编程语言添加了基本的文本编辑支持，例如括号匹配、自动缩进和语法突出显示。</p><h3 id="_4-程序语言特性" tabindex="-1"><a class="header-anchor" href="#_4-程序语言特性" aria-hidden="true">#</a> 4. 程序语言特性</h3><p>编程语言功能添加了丰富的编程语言支持，例如悬停、转到定义、诊断错误、IntelliSense 和 CodeLens。</p><h3 id="_5-扩展工作台" tabindex="-1"><a class="header-anchor" href="#_5-扩展工作台" aria-hidden="true">#</a> 5. 扩展工作台</h3><p>工作台是指包含标题栏、活动栏、侧边栏、控制板、编辑组、状态栏等UI组件的整体Visual Studio Code UI。VS Code提供了各种API，允许将自己的组件添加到工作台。</p><h3 id="_6-调试" tabindex="-1"><a class="header-anchor" href="#_6-调试" aria-hidden="true">#</a> 6. 调试</h3><p>可以通过编写将 VS Code 的调试 UI 连接到特定调试器或运行时的调试器扩展来利用 VS Code 的调试功能。</p><h2 id="三、vscode插件实战" tabindex="-1"><a class="header-anchor" href="#三、vscode插件实战" aria-hidden="true">#</a> 三、vscode插件实战</h2><blockquote><p>vscode插件其实是vscode对外提供了一些能力，如果不是特别需要其实没有必要完整的学习整体内容，仅仅需要了解其大体开发思路、能够解决的问题，之所以这么说是因为（以上纯个人观点，不一定正确）学习该部分的内容需要一定精力，但学后并不一定能够在自己项目中得到使用，深入学习投入于产出并不成正比，所以本次我只会讲述入门级内容，具体的内容扔需要读者在需要这一部分能力的时候再深入研究。</p></blockquote><h3 id="_3-1-项目初始化" tabindex="-1"><a class="header-anchor" href="#_3-1-项目初始化" aria-hidden="true">#</a> 3.1 项目初始化</h3><p>官方为了方便开发人员进行vscode插件的开发，提供了对yo应的脚手架来生成对应的项目。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>// 安装需要的包 
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> yo generator-code 
// 运行 
yo code
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上述命令其实安装了两个包（yo和generator-code)，这两个包用途如下：</p><ol><li>yo模块全局安装后就安装了Yeoman，Yeoman是通用型项目脚手架工具，可以根据一套模板，生成一个对应的项目结构</li><li>generator-code模块是VS Code扩展生成器，与yo配合使用才能构建项目。</li></ol><h3 id="_3-2-重要文件" tabindex="-1"><a class="header-anchor" href="#_3-2-重要文件" aria-hidden="true">#</a> 3.2 重要文件</h3><p>在项目生成之后，目录结构如下所示，其中最重要的文件是package.json和extension.js，了解这两个文件基本上就可以入门开发一个vscode插件了。<br><img src="`+r+'" alt="2.png" loading="lazy"></p><h4 id="_3-2-1-package-json" tabindex="-1"><a class="header-anchor" href="#_3-2-1-package-json" aria-hidden="true">#</a> 3.2.1 package.json</h4>',26),f={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fextension-manifest",target:"_blank",rel:"noopener noreferrer"},_=e(`<div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;demo&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 插件名</span>
    <span class="token property">&quot;displayName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;插件&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 显示在应用市场的名字</span>
    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;我的第一个插件测试&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 具体描述</span>
    <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 插件的版本号</span>
    <span class="token property">&quot;engines&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;vscode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.60.0&quot;</span> <span class="token comment">// 最低支持的vscode版本</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;categories&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;Other&quot;</span> <span class="token comment">// 扩展类别</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 激活事件组，在那些事件情况下被激活</span>
    <span class="token property">&quot;activationEvents&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;onCommand:demo.helloWorld&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 插件的主入口文件</span>
    <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./extension.js&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 贡献点</span>
    <span class="token property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 命令</span>
        <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;demo.helloWorld&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello World&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint .&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;pretest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run lint&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node ./test/runTest.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 开发依赖项</span>
    <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;@types/vscode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.60.0&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;@types/glob&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.1.3&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;@types/mocha&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^8.2.2&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;@types/node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;14.x&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;eslint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.27.0&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;glob&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.1.7&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;mocha&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^8.4.0&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;typescript&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.3.2&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;vscode-test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.5.2&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这份清单文件中，重点关注的主要有三部分内容：activationEvents、main以及contributes，其是整个文件中的重中之重。</p><h5 id="_1-main" tabindex="-1"><a class="header-anchor" href="#_1-main" aria-hidden="true">#</a> 1. main</h5><p>指明了该插件的主入口在哪，只有找到主入口整个项目才能正常的运转、</p><h5 id="_2-activationevents" tabindex="-1"><a class="header-anchor" href="#_2-activationevents" aria-hidden="true">#</a> 2. activationEvents</h5>`,5),F={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Factivation-events",target:"_blank",rel:"noopener noreferrer"},q={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Factivation-events%23onLanguage",target:"_blank",rel:"noopener noreferrer"},y={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Factivation-events%23onCommand",target:"_blank",rel:"noopener noreferrer"},x={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Factivation-events%23onDebugInitialConfigurations",target:"_blank",rel:"noopener noreferrer"},A={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Factivation-events%23onDebugResolve",target:"_blank",rel:"noopener noreferrer"},w={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Factivation-events%23workspaceContains",target:"_blank",rel:"noopener noreferrer"},S={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Factivation-events%23onFileSystem",target:"_blank",rel:"noopener noreferrer"},j={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Factivation-events%23onView",target:"_blank",rel:"noopener noreferrer"},C={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Factivation-events%23onUri",target:"_blank",rel:"noopener noreferrer"},I={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Factivation-events%23onWebviewPanel",target:"_blank",rel:"noopener noreferrer"},V={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Factivation-events%23onCustomEditor",target:"_blank",rel:"noopener noreferrer"},P={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Factivation-events%23onAuthenticationRequest",target:"_blank",rel:"noopener noreferrer"},E={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Factivation-events%23Start-up",target:"_blank",rel:"noopener noreferrer"},D={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Factivation-events%23onStartupFinished",target:"_blank",rel:"noopener noreferrer"},L=n("h5",{id:"_3-contributes",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_3-contributes","aria-hidden":"true"},"#"),s(" 3. contributes")],-1),T=n("p",null,"通过扩展注册contributes用来扩展Visual Studio Code中的各项技能，其有多个配置，如下所示：",-1),z={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.breakpoints",target:"_blank",rel:"noopener noreferrer"},U={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.colors",target:"_blank",rel:"noopener noreferrer"},W={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.commands",target:"_blank",rel:"noopener noreferrer"},M={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.configuration",target:"_blank",rel:"noopener noreferrer"},N={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.configurationDefaults",target:"_blank",rel:"noopener noreferrer"},R={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.customEditors",target:"_blank",rel:"noopener noreferrer"},$={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.debuggers",target:"_blank",rel:"noopener noreferrer"},B={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.grammars",target:"_blank",rel:"noopener noreferrer"},O={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.iconThemes",target:"_blank",rel:"noopener noreferrer"},G={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.jsonValidation",target:"_blank",rel:"noopener noreferrer"},Y={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.keybindings",target:"_blank",rel:"noopener noreferrer"},H={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.languages",target:"_blank",rel:"noopener noreferrer"},J={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.menus",target:"_blank",rel:"noopener noreferrer"},K={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.problemMatchers",target:"_blank",rel:"noopener noreferrer"},Q={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.problemPatterns",target:"_blank",rel:"noopener noreferrer"},X={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.productIconThemes",target:"_blank",rel:"noopener noreferrer"},Z={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.resourceLabelFormatters",target:"_blank",rel:"noopener noreferrer"},nn={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.snippets",target:"_blank",rel:"noopener noreferrer"},sn={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.submenus",target:"_blank",rel:"noopener noreferrer"},an={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.taskDefinitions",target:"_blank",rel:"noopener noreferrer"},tn={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.themes",target:"_blank",rel:"noopener noreferrer"},en={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.typescriptServerPlugins",target:"_blank",rel:"noopener noreferrer"},on={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.views",target:"_blank",rel:"noopener noreferrer"},pn={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.viewsContainers",target:"_blank",rel:"noopener noreferrer"},cn={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.viewsWelcome",target:"_blank",rel:"noopener noreferrer"},ln={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi%2Freferences%2Fcontribution-points%23contributes.walkthroughs",target:"_blank",rel:"noopener noreferrer"},rn=e(`<h4 id="_3-2-2-extension-js文件" tabindex="-1"><a class="header-anchor" href="#_3-2-2-extension-js文件" aria-hidden="true">#</a> 3.2.2 extension.js文件</h4><p>该文件时其入口文件，即package.json中main字段对应的文件（不一定叫extension.js这个名字），该文件中将导出两个方法：activate和deactivate，两个方法的执行时机如下所示：</p><h5 id="_1-activate" tabindex="-1"><a class="header-anchor" href="#_1-activate" aria-hidden="true">#</a> 1. activate</h5><p>这是插件被激活时执行的函数</p><h5 id="_2-deactivate" tabindex="-1"><a class="header-anchor" href="#_2-deactivate" aria-hidden="true">#</a> 2. deactivate</h5><p>这是插件被销毁时调用的方法，比如释放内存等。</p><h3 id="_3-3-实战" tabindex="-1"><a class="header-anchor" href="#_3-3-实战" aria-hidden="true">#</a> 3.3 实战</h3><p>上述已经对vscode插件有了基础的认识，下面就进行一个简单的实战，打造属于自己的一个vscode插件，此插件的功能如下：</p><ol><li>通过在文件编辑区域或文件名上右击弹出按钮，点击按钮获取文件的大小、创建时间和修改时间；</li><li>如果获取的是文件夹，则指明该文件是文件夹，不是文件，给予提示。</li></ol><h4 id="_3-3-1-package-json修改项" tabindex="-1"><a class="header-anchor" href="#_3-3-1-package-json修改项" aria-hidden="true">#</a> 3.3.1 package.json修改项</h4><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token comment">// ……</span>
    <span class="token comment">// 在getFileState指令下激活</span>
    <span class="token property">&quot;activationEvents&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;onCommand:getFileState&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 入口文件</span>
    <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./extension.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 命令</span>
        <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;getFileState&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;File State&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// 菜单项</span>
        <span class="token property">&quot;menus&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// 编辑上下文菜单</span>
            <span class="token property">&quot;editor/context&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token property">&quot;when&quot;</span><span class="token operator">:</span> <span class="token string">&quot;editorFocus&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;getFileState&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;group&quot;</span><span class="token operator">:</span> <span class="token string">&quot;navigation&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token comment">// 资源管理器上下文菜单</span>
            <span class="token property">&quot;explorer/context&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;getFileState&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;group&quot;</span><span class="token operator">:</span> <span class="token string">&quot;navigation&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// ……</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-3-2-主函数内容" tabindex="-1"><a class="header-anchor" href="#_3-3-2-主函数内容" aria-hidden="true">#</a> 3.3.2 主函数内容</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> vscode <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;vscode&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;插件已经被激活&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 注册命令</span>
    <span class="token keyword">let</span> commandOfGetFileState <span class="token operator">=</span> vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">&#39;getFileState&#39;</span><span class="token punctuation">,</span> <span class="token parameter">uri</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 文件路径</span>
        <span class="token keyword">const</span> filePath <span class="token operator">=</span> uri<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> stats</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">showErrorMessage</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">获取文件时遇到错误了</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>err<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!!!</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">showWarningMessage</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">检测的是文件夹，不是文件，请重新选择！！！</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> size <span class="token operator">=</span> stats<span class="token punctuation">.</span>size<span class="token punctuation">;</span>
                <span class="token keyword">const</span> createTime <span class="token operator">=</span> stats<span class="token punctuation">.</span>birthtime<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">const</span> modifyTime <span class="token operator">=</span> stats<span class="token punctuation">.</span>mtime<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">showInformationMessage</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">
                    文件大小为:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>size<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">字节;
                    文件创建时间为:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>createTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;
                    文件修改时间为:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>modifyTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
                </span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">modal</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">const</span> stats <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;stats&#39;</span><span class="token punctuation">,</span> stats<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;isFile&#39;</span><span class="token punctuation">,</span> stats<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 将命令放入其上下文对象中，使其生效</span>
    context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>commandOfGetFileState<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">deactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    activate<span class="token punctuation">,</span>
    deactivate
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-3-3-效果图" tabindex="-1"><a class="header-anchor" href="#_3-3-3-效果图" aria-hidden="true">#</a> 3.3.3 效果图</h4><p>经过开发后，该插件调试效果如下所示：<br><img src="`+u+`" alt="3.gif" loading="lazy"></p><h3 id="_3-4-发布" tabindex="-1"><a class="header-anchor" href="#_3-4-发布" aria-hidden="true">#</a> 3.4 发布</h3><blockquote><p>插件看法完毕之后就是需要分享出去供大家使用，目前有三种方式：</p></blockquote><ol><li>直接把文件夹发给别人，让别人找到vscode的插件存放目录并放进去，然后重启vscode，一般不推荐；</li><li>打包成vsix插件，然后发送给别人安装，如果你的插件涉及机密不方便发布到应用市场，可以尝试采用这种方式；</li><li>注册开发者账号，发布到官网应用市场，这个发布和npm一样是不需要审核的。</li></ol><blockquote><p>每一种方式都可行，并且网上也有很多教程讲述其发布方式，今天我重点讲述一下第二种，毕竟在插件这么多的情况下，很多人更乐于开发一款属于自己的专用插件或者特定自己领域使用的插件，完全没必要发布到应用市场。</p></blockquote><ol><li>安装对应的模块vsce</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> i vsce <span class="token parameter variable">-g</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol><li>利用vsce进行打包，生成对应的vsix文件</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>vsce package
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="`+d+'" alt="4.png" tabindex="0" loading="lazy"><figcaption>4.png</figcaption></figure><ol><li>安装到vscode</li></ol><figure><img src="'+k+'" alt="5.png" tabindex="0" loading="lazy"><figcaption>5.png</figcaption></figure><ol><li>安装完成之后就可以正常的进行使用了</li></ol><figure><img src="'+m+'" alt="6.png" tabindex="0" loading="lazy"><figcaption>6.png</figcaption></figure><h2 id="四、总结" tabindex="-1"><a class="header-anchor" href="#四、总结" aria-hidden="true">#</a> 四、总结</h2><blockquote><p>因为工作中目前还没有遇到这种需求，此次我只是对vscode插件的开发流程进行了一个简单的概述，并没有进一步深入探索，待工作中有这样的场景需要这样的能力去解决某些问题时，能够快速反应有这样的解决方案，再进一步学习也为时不晚，也希望爱学习的小伙伴们也对这一部分能够有一定了解，弥补自己知识上欠缺的一环，后续为己所用。</p></blockquote><h2 id="五、参考文献" tabindex="-1"><a class="header-anchor" href="#五、参考文献" aria-hidden="true">#</a> 五、参考文献</h2>',31),un={href:"https://segmentfault.com/a/1190000038553748",target:"_blank",rel:"noopener noreferrer"},dn=n("br",null,null,-1),kn={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fwww.cnblogs.com%2Fliuxianan%2Fp%2Fvscode-plugin-package-json.html",target:"_blank",rel:"noopener noreferrer"},mn=n("br",null,null,-1),vn={href:"https://link.segmentfault.com/?url=https%3A%2F%2Fcode.visualstudio.com%2Fapi",target:"_blank",rel:"noopener noreferrer"},hn=n("br",null,null,-1),bn=n("br",null,null,-1),gn=n("strong",null,"前端点线面",-1);function fn(_n,Fn){const a=i("ExternalLinkIcon");return p(),c("div",null,[h,n("blockquote",null,[n("p",null,[s("转载："),n("a",b,[s("https://segmentfault.com/a/1190000040720760"),t(a)])])]),g,n("p",null,[s("该文件是vscode扩展的清单文件，里面有很多字段，"),n("a",f,[s("官方"),t(a)]),s("对每个字段都进行了详细阐述，本次我们重点阐述以下初始化后期清单文件。")]),_,n("p",null,[s("指明该插件在何种情况下才会被激活，因为只有激活后插件才能被正常使用，官网已经指明了"),n("a",F,[s("激活的时机"),t(a)]),s("，这样我们就可以按需设置对应时机。（具体每个时机用的时候详细查看即可）")]),n("ul",null,[n("li",null,[n("a",q,[s("onLanguage"),t(a)]),s(' 打开解析为特定语言文件时被激活，例如"onLanguage:python"')]),n("li",null,[n("a",y,[s("onCommand"),t(a)]),s(" 在调用命令时被激活")]),n("li",null,[s("onDebug 在启动调试话之前被激活 "),n("ul",null,[n("li",null,[n("a",x,[s("onDebugInitialConfigurations"),t(a)])]),n("li",null,[n("a",A,[s("onDebugResolve"),t(a)])])])]),n("li",null,[n("a",w,[s("workspaceContains"),t(a)]),s(" 每当打开文件夹并且该文件夹包含至少一个与 glob 模式匹配的文件时")]),n("li",null,[n("a",S,[s("onFileSystem"),t(a)]),s(" 每当读取来自特定_方案_的文件或文件夹时")]),n("li",null,[n("a",j,[s("onView"),t(a)]),s(" 每当在 VS Code 侧栏中展开指定 id 的视图")]),n("li",null,[n("a",C,[s("onUri"),t(a)]),s(" 每当打开该扩展的系统范围的 Uri 时")]),n("li",null,[n("a",I,[s("onWebviewPanel"),t(a)])]),n("li",null,[n("a",V,[s("onCustomEditor"),t(a)])]),n("li",null,[n("a",P,[s("onAuthenticationRequest"),t(a)])]),n("li",null,[n("a",E,[s("*"),t(a)]),s(" 只要一启动vscode，插件就会被激活")]),n("li",null,[n("a",D,[s("onStartupFinished"),t(a)])])]),L,T,n("ul",null,[n("li",null,[n("a",z,[s("breakpoints"),t(a)]),s(" 断点")]),n("li",null,[n("a",U,[s("colors"),t(a)]),s(" 主题颜色")]),n("li",null,[n("a",W,[s("commands"),t(a)]),s(" 命令")]),n("li",null,[n("a",M,[s("configuration"),t(a)]),s(" 配置")]),n("li",null,[n("a",N,[s("configurationDefaults"),t(a)]),s(" 默认的特定于语言的编辑器配置")]),n("li",null,[n("a",R,[s("customEditors"),t(a)]),s(" 自定义编辑器")]),n("li",null,[n("a",$,[s("debuggers"),t(a)])]),n("li",null,[n("a",B,[s("grammars"),t(a)])]),n("li",null,[n("a",O,[s("iconThemes"),t(a)])]),n("li",null,[n("a",G,[s("jsonValidation"),t(a)])]),n("li",null,[n("a",Y,[s("keybindings"),t(a)]),s(" 快捷键绑定")]),n("li",null,[n("a",H,[s("languages"),t(a)])]),n("li",null,[n("a",J,[s("menus"),t(a)])]),n("li",null,[n("a",K,[s("problemMatchers"),t(a)])]),n("li",null,[n("a",Q,[s("problemPatterns"),t(a)])]),n("li",null,[n("a",X,[s("productIconThemes"),t(a)])]),n("li",null,[n("a",Z,[s("resourceLabelFormatters"),t(a)])]),n("li",null,[n("a",nn,[s("snippets"),t(a)]),s(" 特定语言的片段")]),n("li",null,[n("a",sn,[s("submenus"),t(a)])]),n("li",null,[n("a",an,[s("taskDefinitions"),t(a)])]),n("li",null,[n("a",tn,[s("themes"),t(a)]),s(" 颜色主题")]),n("li",null,[n("a",en,[s("typescriptServerPlugins"),t(a)])]),n("li",null,[n("a",on,[s("views"),t(a)])]),n("li",null,[n("a",pn,[s("viewsContainers"),t(a)])]),n("li",null,[n("a",cn,[s("viewsWelcome"),t(a)])]),n("li",null,[n("a",ln,[s("walkthroughs"),t(a)])])]),rn,n("p",null,[n("a",un,[s("vscode插件编写实战"),t(a)]),dn,n("a",kn,[s("vscode插件开发全攻略"),t(a)]),mn,n("a",vn,[s("官方文档"),t(a)]),hn,s(" 1.如果觉得这篇文章还不错，来个分享、点赞吧，让更多的人也看到"),bn,s(" 2.欢迎关注公众号"),gn,s(",开启前端救赎之路。")])])}const xn=o(v,[["render",fn],["__file","从0到1开发一款自己的vscode插件.html.vue"]]);export{xn as default};
